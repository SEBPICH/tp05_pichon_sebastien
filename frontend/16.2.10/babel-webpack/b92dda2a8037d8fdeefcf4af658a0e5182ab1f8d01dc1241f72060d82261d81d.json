{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Action, Selector, State } from '@ngxs/store';\nimport { AddPanier, DelPanier } from '../actions/cart-action';\nimport * as i0 from \"@angular/core\";\nexport let PanierState = class PanierState {\n  static getNbProduits(state) {\n    return state.produits ?? [].length;\n  }\n  static getListeProduits(state) {\n    return state.produits;\n  }\n  add({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    patchState({\n      produits: [...(state.produits ?? []), payload]\n    });\n  }\n  del({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    console.log(\"AMONG US ඞ\");\n    patchState({\n      produits: (state.produits ?? []).filter(x => !(payload.name == x.name))\n    });\n  }\n  static #_ = this.ɵfac = function PanierState_Factory(t) {\n    return new (t || PanierState)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PanierState,\n    factory: PanierState.ɵfac\n  });\n};\n__decorate([Action(AddPanier)], PanierState.prototype, \"add\", null);\n__decorate([Action(DelPanier)], PanierState.prototype, \"del\", null);\n__decorate([Selector()], PanierState, \"getNbProduits\", null);\n__decorate([Selector()], PanierState, \"getListeProduits\", null);\nPanierState = __decorate([State({\n  name: 'produits',\n  defaults: {\n    produits: []\n  }\n})], PanierState);","map":{"version":3,"names":["Action","Selector","State","AddPanier","DelPanier","PanierState","getNbProduits","state","produits","length","getListeProduits","add","getState","patchState","payload","del","console","log","filter","x","name","_","_2","factory","ɵfac","__decorate","defaults"],"sources":["/Users/sebastien/Projects/SI_WEB/tp05_pichon_sebastien/src/app/shared/states/panier-state.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  Action,\n  Selector,\n  State,\n  StateContext,\n  createSelector,\n} from '@ngxs/store';\nimport { AddPanier, DelPanier } from '../actions/cart-action';\nimport { PanierStateModel } from './panier-state-model';\nimport { Produit } from '../models/produit';\n@State<PanierStateModel>({\n  name: 'produits',\n  defaults: {\n    produits: [],\n  },\n})\n@Injectable()\nexport class PanierState {\n  @Selector()\n  static getNbProduits(state: PanierStateModel) {\n    return state.produits??[].length;\n  }\n\n  @Selector()\n  static getListeProduits(state: PanierStateModel) {\n    return state.produits;\n  }\n\n  @Action(AddPanier)\n  add(\n    { getState, patchState }: StateContext<PanierStateModel>,\n    { payload }: AddPanier\n  ) {\n    const state = getState();\n    patchState({\n      produits: [...state.produits??[], payload],\n    });\n  }\n\n  @Action(DelPanier)\n  del(\n    { getState, patchState }: StateContext<PanierStateModel>,\n    { payload }: DelPanier\n  ) {\n    const state = getState();\n    console.log(\"AMONG US ඞ\");\n\n\n    patchState({\n      produits: (state.produits??[]).filter(\n        (x:Produit) => !(payload.name == x.name)\n        \n      ),\n    });\n  }\n}\n"],"mappings":";AACA,SACEA,MAAM,EACNC,QAAQ,EACRC,KAAK,QAGA,aAAa;AACpB,SAASC,SAAS,EAAEC,SAAS,QAAQ,wBAAwB;;AAUtD,WAAMC,WAAW,GAAjB,MAAMA,WAAW;EAEf,OAAAC,aAAaA,CAACC,KAAuB;IAC1C,OAAOA,KAAK,CAACC,QAAQ,IAAE,EAAE,CAACC,MAAM;EAClC;EAGO,OAAAC,gBAAgBA,CAACH,KAAuB;IAC7C,OAAOA,KAAK,CAACC,QAAQ;EACvB;EAGAG,GAAGA,CACD;IAAEC,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAa;IAEtB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBC,UAAU,CAAC;MACTL,QAAQ,EAAE,CAAC,IAAGD,KAAK,CAACC,QAAQ,IAAE,EAAE,GAAEM,OAAO;KAC1C,CAAC;EACJ;EAGAC,GAAGA,CACD;IAAEH,QAAQ;IAAEC;EAAU,CAAkC,EACxD;IAAEC;EAAO,CAAa;IAEtB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBI,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IAGzBJ,UAAU,CAAC;MACTL,QAAQ,EAAE,CAACD,KAAK,CAACC,QAAQ,IAAE,EAAE,EAAEU,MAAM,CAClCC,CAAS,IAAK,EAAEL,OAAO,CAACM,IAAI,IAAID,CAAC,CAACC,IAAI,CAAC;KAG3C,CAAC;EACJ;EAAC,QAAAC,CAAA,G;qBArCUhB,WAAW;EAAA;EAAA,QAAAiB,EAAA,G;WAAXjB,WAAW;IAAAkB,OAAA,EAAXlB,WAAW,CAAAmB;EAAA;;AAYtBC,UAAA,EADCzB,MAAM,CAACG,SAAS,CAAC,C,qCASjB;AAGDsB,UAAA,EADCzB,MAAM,CAACI,SAAS,CAAC,C,qCAejB;AAnCMqB,UAAA,EADNxB,QAAQ,EAAE,C,qCAGV;AAGMwB,UAAA,EADNxB,QAAQ,EAAE,C,wCAGV;AATUI,WAAW,GAAAoB,UAAA,EAPvBvB,KAAK,CAAmB;EACvBkB,IAAI,EAAE,UAAU;EAChBM,QAAQ,EAAE;IACRlB,QAAQ,EAAE;;CAEb,CAAC,C,EAEWH,WAAW,CAsCvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}
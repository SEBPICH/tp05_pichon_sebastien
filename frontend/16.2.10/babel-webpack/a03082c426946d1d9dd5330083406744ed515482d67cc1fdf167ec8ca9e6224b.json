{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Action, Selector, State } from '@ngxs/store';\nimport { AddCart, delFormCart } from '../actions/cart-action';\nimport * as i0 from \"@angular/core\";\nexport let CartState = class CartState {\n  static getNbProduits(state) {\n    return state.products ?? [].length;\n  }\n  static getProductsList(state) {\n    return state.products;\n  }\n  add({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    patchState({\n      products: [...(state.products ?? []), payload]\n    });\n  }\n  del({\n    getState,\n    patchState\n  }, {\n    payload\n  }) {\n    const state = getState();\n    console.log(\"Log\");\n    patchState({\n      products: (state.products ?? []).filter(x => !(payload.name == x.name))\n    });\n  }\n  static #_ = this.ɵfac = function CartState_Factory(t) {\n    return new (t || CartState)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartState,\n    factory: CartState.ɵfac\n  });\n};\n__decorate([Action(AddCart)], CartState.prototype, \"add\", null);\n__decorate([Action(delFormCart)], CartState.prototype, \"del\", null);\n__decorate([Selector()], CartState, \"getNbProduits\", null);\n__decorate([Selector()], CartState, \"getProductsList\", null);\nCartState = __decorate([State({\n  name: 'products',\n  defaults: {\n    products: []\n  }\n})], CartState);","map":{"version":3,"names":["Action","Selector","State","AddCart","delFormCart","CartState","getNbProduits","state","products","length","getProductsList","add","getState","patchState","payload","del","console","log","filter","x","name","_","_2","factory","ɵfac","__decorate","defaults"],"sources":["/Users/sebastien/Projects/SI_WEB/tp05_pichon_sebastien/src/app/shared/states/cart-state.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  Action,\n  Selector,\n  State,\n  StateContext,\n  createSelector,\n} from '@ngxs/store';\nimport { AddCart, delFormCart } from '../actions/cart-action';\nimport { CartStateModel } from './cart-state-model';\nimport { Product } from '../models/product';\n@State<CartStateModel>({\n  name: 'products',\n  defaults: {\n    products: [],\n  },\n})\n@Injectable()\nexport class CartState {\n  @Selector()\n  static getNbProduits(state: CartStateModel) {\n    return state.products??[].length;\n  }\n\n  @Selector()\n  static getProductsList(state: CartStateModel) {\n    return state.products;\n  }\n\n  @Action(AddCart)\n  add(\n    { getState, patchState }: StateContext<CartStateModel>,\n    { payload }: AddCart\n  ) {\n    const state = getState();\n    patchState({\n      products: [...state.products??[], payload],\n    });\n  }\n\n  @Action(delFormCart)\n  del(\n    { getState, patchState }: StateContext<CartStateModel>,\n    { payload }: delFormCart\n  ) {\n    const state = getState();\n    console.log(\"Log\");\n\n\n    patchState({\n      products: (state.products??[]).filter(\n        (x:Product) => !(payload.name == x.name)\n        \n      ),\n    });\n  }\n}\n"],"mappings":";AACA,SACEA,MAAM,EACNC,QAAQ,EACRC,KAAK,QAGA,aAAa;AACpB,SAASC,OAAO,EAAEC,WAAW,QAAQ,wBAAwB;;AAUtD,WAAMC,SAAS,GAAf,MAAMA,SAAS;EAEb,OAAAC,aAAaA,CAACC,KAAqB;IACxC,OAAOA,KAAK,CAACC,QAAQ,IAAE,EAAE,CAACC,MAAM;EAClC;EAGO,OAAAC,eAAeA,CAACH,KAAqB;IAC1C,OAAOA,KAAK,CAACC,QAAQ;EACvB;EAGAG,GAAGA,CACD;IAAEC,QAAQ;IAAEC;EAAU,CAAgC,EACtD;IAAEC;EAAO,CAAW;IAEpB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBC,UAAU,CAAC;MACTL,QAAQ,EAAE,CAAC,IAAGD,KAAK,CAACC,QAAQ,IAAE,EAAE,GAAEM,OAAO;KAC1C,CAAC;EACJ;EAGAC,GAAGA,CACD;IAAEH,QAAQ;IAAEC;EAAU,CAAgC,EACtD;IAAEC;EAAO,CAAe;IAExB,MAAMP,KAAK,GAAGK,QAAQ,EAAE;IACxBI,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IAGlBJ,UAAU,CAAC;MACTL,QAAQ,EAAE,CAACD,KAAK,CAACC,QAAQ,IAAE,EAAE,EAAEU,MAAM,CAClCC,CAAS,IAAK,EAAEL,OAAO,CAACM,IAAI,IAAID,CAAC,CAACC,IAAI,CAAC;KAG3C,CAAC;EACJ;EAAC,QAAAC,CAAA,G;qBArCUhB,SAAS;EAAA;EAAA,QAAAiB,EAAA,G;WAATjB,SAAS;IAAAkB,OAAA,EAATlB,SAAS,CAAAmB;EAAA;;AAYpBC,UAAA,EADCzB,MAAM,CAACG,OAAO,CAAC,C,mCASf;AAGDsB,UAAA,EADCzB,MAAM,CAACI,WAAW,CAAC,C,mCAenB;AAnCMqB,UAAA,EADNxB,QAAQ,EAAE,C,mCAGV;AAGMwB,UAAA,EADNxB,QAAQ,EAAE,C,qCAGV;AATUI,SAAS,GAAAoB,UAAA,EAPrBvB,KAAK,CAAiB;EACrBkB,IAAI,EAAE,UAAU;EAChBM,QAAQ,EAAE;IACRlB,QAAQ,EAAE;;CAEb,CAAC,C,EAEWH,SAAS,CAsCrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}